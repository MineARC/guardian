extends layout

block vars
  span.right
    span#name
      p.inline Name: 
        b.r-green #{name}
    span#mode
      p.inline  Mode: 
        b.r-green #{mode}

block append content
  div(class='jumbotron')
    h3 Email
    div.spacer
    form.input-group#form-add
      input.form-control(type='text' placeholder='example@example.com')
      span.input-group-btn
        button.btn.btn-success#btn-add(type='button') Add
    table(id='email_table' class='table')
      if(emails)
        each email in emails
          tr
            td.col-xs-4= email.email
            td.col-xs-7
              div.dropdown
                button.btn.btn-info.dropdown-toggle(type='button' data-toggle='dropdown')
                  span.num_subs
                  |  Subscriptions
                  span.caret
                ul.alert.alert-default.dropdown-menu
                  li
                    label
                      button.btn.check_all(type='button')
                        | Check all
                    label
                      button.btn.uncheck_all(type='button')
                        | Uncheck all
                  if(elv)
                    li
                      label
                        b ELV
                    each value, key in elv
                      li
                        .checkbox
                          label
                            input(type='checkbox' checked=(email.subscription.elv && email.subscription.elv.indexOf(key) > -1) data-type='elv' data-index=key)
                            = key
                  if(elvp)
                    li
                      label
                        b ELVP
                    each value, key in elvp
                      li
                        .checkbox
                          label
                            input(type='checkbox' checked=(email.subscription.elvp && email.subscription.elvp).indexOf(key) > -1 data-type='elvp' data-index=key)
                            = key
                  if(series3)
                    li
                      label
                        b Series4
                    each value, key in series3
                      li
                        .checkbox
                          label
                            input(type='checkbox' checked=(email.subscription.series3 && email.subscription.series3.indexOf(key) > -1) data-type='series3' data-index=key)
                            = key
                  if(series4)
                    li
                      label
                        b Series4
                    each value, key in series4
                      li
                        .checkbox
                          label
                            input(type='checkbox' checked=(email.subscription.series4 && email.subscription.series4.indexOf(key) > -1) data-type='series4' data-index=key)
                            = key
                  if(cams)
                    li
                      label
                        b CAMS
                    each value, key in cams
                      li
                        .checkbox
                          label
                            input(type='checkbox' checked=(email.subscription.cams && email.subscription.cams.indexOf(key) > -1) data-type='cams' data-index=key)
                            = key
                  if(aura)
                    li
                      label
                        b Aura-FX
                    each value, key in aura
                      li
                        .checkbox
                          label
                            input(type='checkbox' checked=(email.subscription.aura && email.subscription.aura.indexOf(key) > -1) data-type='aura' data-index=key)
                            = key
                  
            td.col-xs-1
              .input-group
                span
                  button.btn.btn-danger.btn-delete(role='button' data-email=(email.email))
                    | Delete
                span.input-group-btn
                  button.btn.btn-info.btn-save(role='button' data-email=(email.email) style='display:none;')
                    | Save
        
    div.alert.alert-danger#error-alert(style='display:none;')
      strong
        | Error
      |  unable to add email.
      
block append styles
      
block append scripts
  script(src='/javascripts/notifications.js')